# 1331.rank-transform-of-an-array

> Given an array of integersÂ arr, replace each element with its rank.
>
> The rank represents how large the element is. The rank has the following
> rules:
>
>
> Rank is an integer starting from 1.
> The larger the element, the larger the rank. If two elements are equal,
> their rank must be the same.
> Rank should be as small as possible.
>
>
>
> Example 1:
> Input: arr = [40,10,20,30]
> Output: [4,1,2,3]
> Explanation: 40 is the largest element. 10 is the smallest. 20 is the second
> smallest. 30 is the third smallest.
>
> Example 2:
> Input: arr = [100,100,100]
> Output: [1,1,1]
> Explanation: Same elements share the same rank.
>
>
> Example 3:
> Input: arr = [37,12,28,9,100,56,80,5,12]
> Output: [5,3,4,2,8,6,7,1,3]
>
>
>
> Constraints:
> 0 <= arr.length <= 10^5
> -10^9Â <= arr[i] <= 10^9
> 
> ----
>
> ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œè¿”å›žè¿™ä¸ªæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å¯¹åº”çš„æŽ’åºã€‚
> 
> æŽ’åºä»Ž1å¼€å§‹ï¼Œå…ƒç´ è¶Šå¤§ï¼ŒæŽ’åºè¶Šå¤§ã€‚
> ç›¸ç­‰çš„å…ƒç´ ï¼ŒæŽ’åºç›¸ç­‰ã€‚
>
> 0 <= arr.length <= 10^5
>
> -10^9Â <= arr[i] <= 10^9
>
> éš¾åº¦ï¼šç®€å•

## è§£é¢˜
æˆ‘æƒ³è¯´è¿™ä¸ªé¢˜ç›®çœŸçš„ä¸€ç‚¹æ„æ€ä¹Ÿæ²¡æœ‰ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆðŸ‘ðŸ»çš„äººæ¯”ðŸ‘ŽðŸ»çš„äººå¤šã€‚

æœ¬èº«è¿™ä¸ªé¢˜ç›®çš„éš¾åº¦æ˜¯ç®€å•ï¼Œå½“æˆ‘çœ‹åˆ°ðŸ‘ðŸ»çš„äººæ¯”ðŸ‘ŽðŸ»çš„äººå¤šï¼Œæˆ‘ä»¥ä¸ºè¿™ä¸ªé¢˜è‚¯å®šæœ‰ä¸€äº›å¥‡ç‰¹çš„åœ°æ–¹ã€‚

ä½†æ˜¯æ€æ¥æƒ³åŽ»ï¼Œæ²¡æƒ³åˆ°æ›´å¥½çš„æ–¹æ¡ˆã€‚ã€‚ã€‚

è¦æƒ³èŽ·å¾—æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„æŽ’åºï¼Œé‚£ä¹ˆï¼Œå¿…ä¸å¯å°‘çš„å°±æ˜¯ï¼Œå¯¹åŽŸæ•°ç»„å…ˆæŽ’åºï¼Œç„¶åŽå°†æŽ’å¥½åºçš„æ•°ç»„éåŽ†ä¸€éï¼Œå°†å…¶æŽ’åºä¿å­˜èµ·æ¥ï¼Œå†å’ŒåŽŸæ¥çš„æ•°ç»„è¿›è¡Œä¸€ä¸€æ˜ å°„è¿”å›žå³å¯ã€‚

è¿™é‡Œæœ‰ä¸‰ä¸ªæ­¥éª¤ï¼Œ1. æŽ’åº 2.å°†å…¶æŽ’åºä¿å­˜ 3.ä¸ŽåŽŸæ¥æ•°ç»„è¿›è¡Œæ˜ å°„

æŽ’åºï¼Œè‚¯å®šæ˜¯å¿«æŽ’ã€‚

ä¿å­˜æŽ’åºï¼Œè¿™é‡Œä½¿ç”¨å“ˆå¸Œè¡¨ã€‚

æ˜ å°„ï¼ŒéåŽ†åŽŸæ•°ç»„ï¼Œç„¶åŽä»Žå“ˆå¸Œè¡¨ä¸­ç›´æŽ¥èŽ·å–å…ƒç´ çš„æŽ’åºå³å¯ã€‚

ä½†æˆ‘æƒ³ç€ï¼Œæ—¢ç„¶è¿™ä¸ªé—®é¢˜é‚£ä¹ˆå¤šäººðŸ‘ðŸ»ï¼Œæ˜¯ä¸æ˜¯æœ‰å…¶ä»–å¥‡æŠ€æ·«å·§ï¼Ÿæƒ³äº†åŠå¤©ï¼Œæ²¡æƒ³å‡ºæ¥ã€‚

ç„¶åŽå¿ä¸ä½å¥½å¥‡å¿ƒï¼Œç¿»å¼€äº†è¿™ä¸ªé¢˜çš„è§£é¢˜è®¨è®ºåŒºã€‚

è®¨è®ºåŒºé‡Œï¼Œå·®ä¸å¤šä¹Ÿå°±æ˜¯ç”¨çš„ä¸Šé¢çš„æ–¹æ³•ã€‚ä¸ä¼šå·®å¤ªå¤šã€‚

ä½†æ˜¯ï¼Œè¿˜æ˜¯ç¿»åˆ°äº†ä¸€äº›æ‰€è°“çš„â€œå¥‡æŠ€æ·«å·§â€ï¼š
1. æŽ’åºï¼Œä¸ä½¿ç”¨ä¼ ç»Ÿçš„æŽ’åºæ–¹æ³•ï¼Œä½¿ç”¨ä¸€ä¸ªæ‰€è°“çš„æ¡¶æŽ’åºã€‚å…·ä½“å°±æ˜¯å…ˆæ‰¾åˆ°åŽŸæ•°ç»„ä¸­æœ€å¤§å€¼ä¸Žæœ€å°å€¼ï¼Œç„¶åŽæœ€å¤§å€¼ä¸Žæœ€å°å€¼çš„å·®ä½œä¸ºä¸€ä¸ªæ¡¶çš„å®¹é‡ï¼ˆå…¶å®žå°±æ˜¯å¼€è¾Ÿäº†ä¸€ä¸ªæ–°çš„é•¿åº¦ä¸º(max-min-1)çš„æ•°ç»„ï¼‰ï¼Œç„¶åŽå°†åŽŸæ•°ç»„ä¸­çš„å…ƒç´ ï¼Œæ”¾åˆ°æ¡¶å¯¹åº”çš„ä½ç½®ã€‚è¿™æ ·åªéœ€è¦éåŽ†è¿™ä¸ªæ¡¶å°±èƒ½æ‰¾åˆ°å…ƒç´ çš„å¯¹åº”é¡ºåºã€‚åŽé¢å°±æ˜¯ä¸€æ ·äº†ï¼Œä¿å­˜æŽ’åºåˆ°å“ˆå¸Œè¡¨ï¼Œæœ€åŽæ˜ å°„ã€‚

ä¹ä¸€çœ‹ï¼Œè¿™ä¸ªåŠžæ³•å¥½èªæ˜Žå•Šï¼Œè¿™æ ·å°±ç›¸å½“äºŽæŠŠæŽ’åºåªéœ€è¦O(n)çš„å¤æ‚åº¦ã€‚çž¬é—´æé«˜ä¸€ä¸ªlevelã€‚

äºŽæ˜¯ï¼Œå†™ä»£ç å®žéªŒï¼š

```go
func arrayRankTransform(arr []int) []int {
    length := len(arr)
    result := make([]int, length)
    if length == 0 {
        return result
    }

    min, max := 1000000001, -1000000001
    for _, v := range arr {
        if v > max {
            max = v
        }
        if v < min {
            min = v
        }
    }

    sortedLength := max - min + 1
    sortedArr := make([]int, sortedLength)

    for _, v := range arr {
        idx := v - min
        sortedArr[idx]++
    }

    rankMap := map[int]int{}

    r := 1
    for i, v := range sortedArr {
        if v != 0 {
            rankMap[min+i] = r
            r++
        }
    }

    for i := 0; i < length; i++ {
        result[i] = rankMap[arr[i]]
    }
    return result
}
```

ä¸€æäº¤ï¼Œå“Žå‘€æˆ‘åŽ»ï¼Œæžœä¸å…¶ç„¶ï¼Œçž¬é—´æ‰“è´¥äº†åŒç™¾ï¼Œæœ‰æœ¨æœ‰ã€‚ã€‚ã€‚

![æäº¤](https://img001-10042971.cos.ap-shanghai.myqcloud.com/leetcode/Xnip2020-04-28_17-43-08.png)

å¾ˆæ˜¯å…´å¥‹å•Šï¼ŒçœŸæ˜¯â€œå¥‡æŠ€æ·«å·§â€ã€‚

å¯æ˜¯ï¼Œä»”ç»†å¯¹è¿™ä¸ªæ–¹å¼åˆ†æžåŽï¼Œæˆ‘åˆæœ‰äº†æ–°çš„åˆ¤æ–­ã€‚

ä¸å¯¹ï¼Œè¿™ä¸ªå¥‡è¿¹æ·«å·§åªå–æ‚¦äº†æµ‹è¯•ç”¨ä¾‹ï¼Œä½†å…¶å®žå¹¶ä¸é«˜æ•ˆã€‚

æ€Žä¹ˆè¯´ï¼Œé¢˜ç›®ä¸­å¯¹æ•°ç»„å…ƒç´ çš„å–å€¼èŒƒå›´æœ‰é™åˆ¶ï¼Œè¿™ä¸ªé™åˆ¶å…¶å®žæ˜¯å¾ˆå¤§çš„ï¼Œ`-10^9Â <= arr[i] <= 10^9`ï¼Œé‚£å¦‚æžœæµ‹è¯•ç”¨ä¾‹åªæ˜¯ç®€å•çš„èŒƒå›´é‡Œçš„æœ€å¤§å€¼å’Œæœ€å°å€¼å‘¢ï¼Ÿå³æµ‹è¯•ç”¨ä¾‹ä¸º`[1000000000, -1000000000]`ï¼Œé‚£ä¹ˆç”Ÿæˆçš„è¿™ä¸ªæ¡¶å¯è°“æ˜¯ç›¸å½“å·¨å¤§ã€‚ã€‚ã€‚

æœ‰2000000001ä¸ªå…ƒç´ ã€‚ç„¶åŽåœ¨è¿™ä¸ªå¾ˆå¤§çš„æ¡¶é‡ŒéåŽ†ç»Ÿè®¡å…ƒç´ çš„æŽ’åºï¼Œåæ­£æˆ‘çš„ç”µè„‘æ˜¯å¾ˆæ…¢ï¼Œ13å¯¸çš„MBPï¼Œè·‘äº†12ç§’ï¼Œå®Œå®Œå…¨å…¨è¶…å‡ºäº†ä¸¤ä¸ªå…ƒç´ è¿›è¡ŒæŽ’åºçš„æ•ˆçŽ‡ã€‚ã€‚ã€‚ä¸çŸ¥é“æµ‹è¯•ç”¨ä¾‹ä¸­æœ‰æ²¡æœ‰`[1000000000, -1000000000]`è¿™ä¸ªç”¨ä¾‹ï¼Œæˆ‘çŒœå¯èƒ½æ²¡æœ‰ï¼Œä¸ç„¶è·‘12sæ—©å·²è¶…æ—¶äº†ã€‚


æ‰€ä»¥æˆ‘è§‰å¾—è¿™ä¸ªé¢˜ï¼Œä»Žé¢˜ç›®ï¼Œåˆ°æµ‹è¯•ç”¨ä¾‹ï¼Œè®¾è®¡çš„éƒ½ä¸å¥½ï¼Œæµ‹è¯•ç”¨ä¾‹çš„è®¾è®¡ï¼Œå–æ‚¦äº†åˆšè¯´çš„é‡‡ç”¨â€œå¥‡æŠ€æ·«å·§â€çš„æ–¹æ³•ï¼Œä½†è¿™ä¸ªæ–¹æ³•å…¶å®žåœ¨é¢˜ç›®èŒƒå›´å†…ï¼Œå¹¶ä¸å®žç”¨ã€‚

è¿˜æ˜¯ç”¨æœ€å¸¸è§„çš„æŽ’åºå§ï¼š

```go
type IntSlice []int

func (s IntSlice) Len() int           { return len(s) }
func (s IntSlice) Swap(i, j int)      { s[i], s[j] = s[j], s[i] }
func (s IntSlice) Less(i, j int) bool { return s[i] < s[j] }

func arrayRankTransform(arr []int) []int {
    length := len(arr)
    result := make([]int, length)
    if length == 0 {
        return result
    }

    for i, v := range arr {
        result[i] = v
    }

    sort.Sort(IntSlice(result))

    rank := 1
    pre := result[0]

    rankMap := map[int]int{}

    for _, v := range result {

        if pre != v {
            rank++
        }
        rankMap[v] = rank
        pre = v
    }

    for i, v := range arr {
        result[i] = rankMap[v]
    }

    return result
}

```

![ç»“æžœ](https://img001-10042971.cos.ap-shanghai.myqcloud.com/leetcode/Xnip2020-04-28_18-18-21.png)
